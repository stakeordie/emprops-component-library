{
  "name": "Diffusion Upscaler",
  "description": "uses diffusion to upscale an image",
  "server_id": "d10aa75d-e69f-497f-8eaf-088c83434eeb",
  "inputs": {
    "1": {
      "image": {
        "value": "image",
        "is_required": true
      }
    },
    "2": {
      "ckpt_name": {
        "value": "model",
        "is_required": false,
        "default": "juggernaut_reborn.safetensors"
      }
    },
    "5": {
      "text": {
        "value": "prompt",
        "is_required": false,
        "default": "masterpiece, best quality, highres"
      }
    },
    "6": {
      "text": {
        "value": "negative_prompt",
        "is_required": false,
        "default": "(worst quality, low quality, normal quality:1.5)"
      }
    },
    "18": {
      "strength": {
        "value": "controlnet_strength",
        "is_required": false,
        "default": 0.5
      }
    },
    "20": {
      "sampler_name": {
        "value": "sampler",
        "is_required": false,
        "default": "dpmpp_3m_sde_gpu"
      }
    },
    "21": {
      "denoise": {
        "value": "denoising",
        "is_required": false,
        "default": 0.35
      },
      "steps": {
        "value": "steps",
        "is_required": false,
        "default": 20
      }
    },
    "25": {
      "noise_seed": {
        "value": "seed",
        "is_required": true
      },
      "cfg": {
        "value": "cfg",
        "is_required": false,
        "default": 8
      }
    },
    "86": {
      "value": {
        "value": "output_size",
        "is_required": false,
        "default": 2048
      }
    },
    "99": {
      "value": {
        "value": "use_color_match",
        "is_required": false,
        "default": true
      }
    },
    "101": {
      "tile_size": {
        "value": "tile_size",
        "is_required": false,
        "default": 768
      }
    },
    "102": {
      "tile_size": {
        "value": "tile_size",
        "is_required": false,
        "default": 768
      }
    },
    "104": {
      "width": {
        "value": "tile_size",
        "is_required": false,
        "default": 768
      },
      "height": {
        "value": "tile_size",
        "is_required": false,
        "default": 768
      }
    },
    "110":{
      "value": {
        "value": "use_upscale",
        "is_required": false,
        "default": true
      }
    }
  },
  "workflow":{
    "1": {
      "inputs": {
        "image": "Cities_This_is_the_One_1 (1).png",
        "upload": "image"
      },
      "class_type": "LoadImage",
      "_meta": {
        "title": "Load Image"
      }
    },
    "2": {
      "inputs": {
        "ckpt_name": "juggernaut_reborn.safetensors"
      },
      "class_type": "CheckpointLoaderSimple",
      "_meta": {
        "title": "Load Checkpoint"
      }
    },
    "3": {
      "inputs": {
        "lora_name": "more_details.safetensors",
        "strength_model": 0.25,
        "strength_clip": 0.25,
        "model": [
          "2",
          0
        ],
        "clip": [
          "2",
          1
        ]
      },
      "class_type": "LoraLoader",
      "_meta": {
        "title": "Load LoRA"
      }
    },
    "4": {
      "inputs": {
        "lora_name": "SDXLrender_v2.0.safetensors",
        "strength_model": 0.1,
        "strength_clip": 0.1,
        "model": [
          "3",
          0
        ],
        "clip": [
          "3",
          1
        ]
      },
      "class_type": "LoraLoader",
      "_meta": {
        "title": "Load LoRA"
      }
    },
    "5": {
      "inputs": {
        "text": "masterpiece, best quality, highres, small little mischievious elves making toys",
        "clip": [
          "4",
          1
        ]
      },
      "class_type": "CLIPTextEncode",
      "_meta": {
        "title": "CLIP Text Encode (Prompt)"
      }
    },
    "6": {
      "inputs": {
        "text": "(worst quality, low quality, normal quality:1.5)",
        "clip": [
          "4",
          1
        ]
      },
      "class_type": "CLIPTextEncode",
      "_meta": {
        "title": "CLIP Text Encode (Prompt)"
      }
    },
    "7": {
      "inputs": {
        "model_name": "4xNomosUniDAT_otf.safetensors"
      },
      "class_type": "UpscaleModelLoader",
      "_meta": {
        "title": "Load Upscale Model"
      }
    },
    "8": {
      "inputs": {
        "upscale_model": [
          "7",
          0
        ],
        "image": [
          "46",
          0
        ]
      },
      "class_type": "ImageUpscaleWithModel",
      "_meta": {
        "title": "Upscale Image (using Model)"
      }
    },
    "13": {
      "inputs": {
        "b1": 1.05,
        "b2": 1.08,
        "s1": 0.9500000000000001,
        "s2": 0.8,
        "model": [
          "4",
          0
        ]
      },
      "class_type": "FreeU_V2",
      "_meta": {
        "title": "FreeU_V2"
      }
    },
    "14": {
      "inputs": {
        "scale": 1,
        "model": [
          "13",
          0
        ]
      },
      "class_type": "PerturbedAttentionGuidance",
      "_meta": {
        "title": "PerturbedAttentionGuidance"
      }
    },
    "15": {
      "inputs": {
        "hard_mode": true,
        "boost": true,
        "model": [
          "14",
          0
        ]
      },
      "class_type": "Automatic CFG",
      "_meta": {
        "title": "Automatic CFG"
      }
    },
    "16": {
      "inputs": {
        "method": "MultiDiffusion",
        "tile_width": [
          "104",
          1
        ],
        "tile_height": [
          "104",
          2
        ],
        "tile_overlap": 128,
        "tile_batch_size": 4,
        "model": [
          "15",
          0
        ]
      },
      "class_type": "TiledDiffusion",
      "_meta": {
        "title": "Tiled Diffusion"
      }
    },
    "17": {
      "inputs": {
        "control_net_name": "control_v11f1e_sd15_tile_fp16.safetensors"
      },
      "class_type": "ControlNetLoader",
      "_meta": {
        "title": "Load ControlNet Model"
      }
    },
    "18": {
      "inputs": {
        "strength": 0.75,
        "start_percent": 0,
        "end_percent": 1,
        "positive": [
          "5",
          0
        ],
        "negative": [
          "6",
          0
        ],
        "control_net": [
          "17",
          0
        ],
        "image": [
          "46",
          0
        ]
      },
      "class_type": "ControlNetApplyAdvanced",
      "_meta": {
        "title": "Apply ControlNet"
      }
    },
    "20": {
      "inputs": {
        "sampler_name": "dpmpp_2m"
      },
      "class_type": "KSamplerSelect",
      "_meta": {
        "title": "KSamplerSelect"
      }
    },
    "21": {
      "inputs": {
        "model_type": "SDXL",
        "steps": 25,
        "denoise": 0.75
      },
      "class_type": "AlignYourStepsScheduler",
      "_meta": {
        "title": "AlignYourStepsScheduler"
      }
    },
    "25": {
      "inputs": {
        "add_noise": true,
        "noise_seed": 539,
        "cfg": 8,
        "model": [
          "96",
          0
        ],
        "positive": [
          "18",
          0
        ],
        "negative": [
          "18",
          1
        ],
        "sampler": [
          "20",
          0
        ],
        "sigmas": [
          "21",
          0
        ],
        "latent_image": [
          "102",
          0
        ]
      },
      "class_type": "SamplerCustom",
      "_meta": {
        "title": "SamplerCustom"
      }
    },
    "46": {
      "inputs": {
        "width": [
          "86",
          0
        ],
        "height": [
          "86",
          0
        ],
        "interpolation": "nearest",
        "method": "keep proportion",
        "condition": "downscale if bigger",
        "multiple_of": 0,
        "image": [
          "1",
          0
        ]
      },
      "class_type": "ImageResize+",
      "_meta": {
        "title": "ðŸ”§ Image Resize_clamp maximum"
      }
    },
    "63": {
      "inputs": {
        "filename_prefix": "upscaled",
        "add_timestamp": true,
        "save_metadata_json": false,
        "images": [
          "101",
          0
        ]
      },
      "class_type": "SaveImageAdvanced",
      "_meta": {
        "title": "SaveImageAdvanced"
      }
    },
    "85": {
      "inputs": {
        "width": [
          "86",
          0
        ],
        "height": [
          "86",
          0
        ],
        "interpolation": "lanczos",
        "method": "keep proportion",
        "condition": "always",
        "multiple_of": 8,
        "image": [
          "8",
          0
        ]
      },
      "class_type": "ImageResize+",
      "_meta": {
        "title": "ðŸ”§ Image Resize"
      }
    },
    "86": {
      "inputs": {
        "value": 2048
      },
      "class_type": "Eden_Int",
      "_meta": {
        "title": "LONGEST SIDE"
      }
    },
    "89": {
      "inputs": {
        "preset": "PLUS (high strength)",
        "model": [
          "16",
          0
        ]
      },
      "class_type": "IPAdapterUnifiedLoader",
      "_meta": {
        "title": "IPAdapter Unified Loader"
      }
    },
    "90": {
      "inputs": {
        "interpolation": "LANCZOS",
        "crop_position": "center",
        "sharpening": 0.05,
        "image": [
          "111",
          0
        ]
      },
      "class_type": "PrepImageForClipVision",
      "_meta": {
        "title": "Prep Image For ClipVision"
      }
    },
    "92": {
      "inputs": {
        "weight": [
          "95",
          0
        ],
        "weight_type": "composition precise",
        "combine_embeds": "concat",
        "start_at": 0,
        "end_at": 1,
        "embeds_scaling": "V only",
        "enhance_tiles": 2,
        "enhance_ratio": 1,
        "model": [
          "89",
          0
        ],
        "ipadapter": [
          "89",
          1
        ],
        "image": [
          "90",
          0
        ]
      },
      "class_type": "IPAdapterClipVisionEnhancer",
      "_meta": {
        "title": "IPAdapter ClipVision Enhancer"
      }
    },
    "95": {
      "inputs": {
        "value": 5
      },
      "class_type": "Eden_Float",
      "_meta": {
        "title": "IPADAPTER STRENGTH"
      }
    },
    "96": {
      "inputs": {
        "switch": [
          "97",
          0
        ],
        "on_false": [
          "16",
          0
        ],
        "on_true": [
          "92",
          0
        ]
      },
      "class_type": "InversionDemoLazySwitch",
      "_meta": {
        "title": "Lazy Switch_USE IPADAPTER"
      }
    },
    "97": {
      "inputs": {
        "value": false
      },
      "class_type": "Eden_Bool",
      "_meta": {
        "title": "USE IPADAPTER"
      }
    },
    "99": {
      "inputs": {
        "value": true
      },
      "class_type": "Eden_Bool",
      "_meta": {
        "title": "USE COLOR MATCH"
      }
    },
    "101": {
      "inputs": {
        "tile_size": 400,
        "fast": false,
        "samples": [
          "25",
          0
        ],
        "vae": [
          "2",
          2
        ]
      },
      "class_type": "VAEDecodeTiled_TiledDiffusion",
      "_meta": {
        "title": "Tiled VAE Decode"
      }
    },
    "102": {
      "inputs": {
        "tile_size": 400,
        "fast": false,
        "color_fix": [
          "99",
          0
        ],
        "pixels": [
          "111",
          0
        ],
        "vae": [
          "2",
          2
        ]
      },
      "class_type": "VAEEncodeTiled_TiledDiffusion",
      "_meta": {
        "title": "Tiled VAE Encode"
      }
    },
    "104": {
      "inputs": {
        "width": 396,
        "height": 396,
        "interpolation": "lanczos",
        "method": "keep proportion",
        "condition": "always",
        "multiple_of": 8,
        "image": [
          "1",
          0
        ]
      },
      "class_type": "ImageResize+",
      "_meta": {
        "title": "ðŸ”§ Image Resize"
      }
    },
    "110": {
      "inputs": {
        "value": false
      },
      "class_type": "Eden_Bool",
      "_meta": {
        "title": "Upscale"
      }
    },
    "111": {
      "inputs": {
        "boolean": [
          "110",
          0
        ],
        "on_true": [
          "85",
          0
        ],
        "on_false": [
          "46",
          0
        ]
      },
      "class_type": "easy ifElse",
      "_meta": {
        "title": "If else"
      }
    }
  },
  "form": {
    "main": [
      {
        "id": "image",
        "name": "Select Image",
        "type": "image_loader",
        "display": true
      },
      {
        "id": "prompt",
        "name": "Prompt",
        "type": "prompt_editor",
        "placeholder": "Enter a prompt... ",
        "display": true
      },
      {
        "id": "negative_prompt",
        "name": "Negative Prompt",
        "type": "prompt_editor",
        "display": true
      },
      {
        "id": "use_upscale",
        "name": "Upscale Image",
        "type": "checkbox",
        "default": true,
        "display": true
      },
      {
        "id": "use_color_match",
        "name": "Color Matcher",
        "type": "checkbox",
        "default": true,
        "display": true
      },
      {
        "id": "output_size",
        "name": "Output Resolution (Longest Side)",
        "type": "select",
        "default": 2048,
        "options": [
          {
            "name": "1024",
            "value": 1024
          },
          {
            "name": "1536",
            "value": 1536
          },
          {
            "name": "2048",
            "value": 2048
          },
          {
            "name": "3072",
            "value": 3072
          },
          {
            "name": "4096",
            "value": 4096
          }
        ],
        "display": true
      },
      {
        "id": "tile_size",
        "name": "Size of Tiles (Smaller = Finer Grain)",
        "type": "select",
        "default": 768,
        "options": [
          {
            "name": "384",
            "value": 384
          },
          {
            "name": "512",
            "value": 512
          },
          {
            "name": "768",
            "value": 768
          },
          {
            "name": "1024",
            "value": 1024
          }
        ],
        "display": true
      },
      {
        "id": "denoising",
        "name": "Denoising Strength",
        "type": "slider",
        "default": 0.35,
        "constraints": {
          "min": 0,
          "max": 1,
          "step": 0.001
        },
        "display": true
      },
      {
        "id": "controlnet_strength",
        "name": "ControlNet Strength",
        "type": "slider",
        "default": 0.5,
        "constraints": {
          "min": 0,
          "max": 1,
          "step": 0.001
        },
        "display": true
      }
    ],
    "advanced": [
      {
        "id": "steps",
        "name": "Steps",
        "type": "slider",
        "default": 20,
        "constraints": {
          "min": 1,
          "max": 60,
          "step": 20
        },
        "display": true
      },
      {
        "id": "sampler",
        "name": "Sampler",
        "default": "dpmpp_3m_sde_gpu",
        "conf_file": "samplers.json",
        "display": true
      },
      {
        "id": "cfg",
        "name": "Guidance (CFG)",
        "type": "slider",
        "default": 8,
        "constraints": {
          "min": 0,
          "max": 50,
          "steps": 0.01
        },
        "display": true
      }
    ]
  },
  "test": {
    "image": "https://cdn.emprops.ai/blog-posts/stadaii.png",
    "seed": "21452451",
    "prompt": "a dog in a car",
    "negative_prompt": "",
    "use_upscale": true,
    "use_color_match": true,
    "output_size": 2048,
    "tile_size": 512,
    "denoising": 0.35,
    "controlnet_strength": 0.5,
    "steps": 20,
    "sampler": "dpmpp_2m",
    "cfg": 8
  }
}